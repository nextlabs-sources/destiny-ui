<div data-ui-view class="cc-layout-full-height" data-ng-controller="createUserController">
  <div class="cc-dlg-create-page-container cc-layout-full-height">
    <div class="no-margin cc-dlg-create-page-title-panel">
      <div class="cc-dlg-create-page-back-btn-div">
        <a>
          <button class="cc-dlg-create-page-back-btn" type="button" class="btn btn-default active" data-ng-click="backToUserList()">
            <i class="fa fa-arrow-left" data-ng-class=""> </i>
          </button>
        </a>
      </div>
      <div class="cc-dlg-create-page-title">
        <span data-ng-if="!isEditMode"> {{"delegation.createuser.title.CreateUser" | translate}} </span>
        <span data-ng-if="isEditMode"> {{ User.firstName }}  {{User.lastName}} </span>
      </div>
      <div class="cc-dlg-create-page-btn-div">
        <a class="btn btn-default cc-btn-discard" data-ng-click="discardUser()"> &nbsp;&nbsp;{{"common.discard" | translate}} </a>
        <a class="btn btn-default cc-btn-primary" data-ng-click="saveUser()"> &nbsp;&nbsp;{{"common.save" | translate}} </a>
      </div>
      <div class="clear"> </div>
    </div>
    <div class="cc-dlg-create-page-bottom-panel">
      <div class="cc-ps-create-page-grammar-div cc-layout-full-height">
        <div class="sticky-left-container">
          <div class="left-container">
            <a href="" data-ng-click="scrollTo('userinfo')">
              <div>
                <div class="cc-ps-create-page-grammar-row" data-ng-class="{'cc-ps-create-page-grammar-row-selected':isActive('userinfo')}">
                <label for="userinfo"> {{"delegation.createuser.grammar.thisUser" | translate}}: </label>
                <div class="wrapper">
                <!-- <span ng-hide="User.firstName.length" class="cc-grammar-placeholder">
                    <{{ 'delegation.createuser.placeholder.firstname' | translate}}>
                  </span> -->
                  <span class="cc-ps-create-page-grammar-content" ng-show="User.firstName.length"> {{User.firstName}} </span>
                  <!--<span ng-hide="User.lastName.length" class="cc-grammar-placeholder">
                    <{{ 'delegation.createuser.placeholder.lastname' | translate}}>
                  </span>-->
                  <span class="cc-ps-create-page-grammar-content" ng-show="User.lastName.length"> {{User.lastName}} </span>
                </div>
                <br>
                <label for="userinfo"> {{"delegation.createuser.grammar.username" | translate}}: </label>
                <div class="wrapper">
                  <span ng-hide="User.username.length" class="cc-grammar-placeholder">
                    <{{ 'delegation.createuser.placeholder.username' | translate}}>
                  </span>
                  <span class="cc-ps-create-page-grammar-content" ng-show="User.username.length"> {{User.username}} </span>
                </div>
                <label for="userinfo"> {{"delegation.createuser.grammar.email" | translate}}: </label>
                <div class="wrapper">
                  <span ng-hide="User.email.length" class="cc-grammar-placeholder">
                    <{{ 'delegation.createuser.placeholder.grammar.email' | translate}}>
                  </span>
                  <span class="cc-ps-create-page-grammar-content" ng-show="User.email.length"> {{User.email}} </span>
                </div>
                
              </div>
              </div>
              
            </a>
            <a href="" data-ng-click="scrollTo('userAttrs')">
              <div class="cc-ps-create-page-grammar-row" data-ng-class="{'cc-ps-create-page-grammar-row-selected':isActive('userAttrs')}">
                <label for="userinfo"> {{"delegation.createuser.grammar.hasAttributes" | translate}}: </label>
                <div class="wrapper">
                  <p ng-repeat="attr in User.attributes">
                    <span>{{attr.key}}</span> <span class="key-word"> = </span> <span>{{attr.value}}</span>
                  </p>
                </div>
              </div>
            </a>
          </div>
        </div>
      </div>
      <div class="cc-dlg-create-page-editor-div cc-dlg-create-page-editor-content" auto-scroll-to scroll-target-selector=".cc-validation-block>p:first,.custom-validation-error" scroll-top-margin="80">
        <form class="cc-dlg-create-page-editor-form" name="userForm.val" novalidate>
          <div id="userinfo" class="cc-dlg-create-page-editor-title">
            <span class="cc-dlg-create-page-title-underline"> {{::"delegation.createuser.subtitle.userInfo" | translate}} </span>
          </div>
          <div class="cc-dlg-create-page-editor-info">
            <div class="btn-group cc-ps-dropdown-grp cc-dlg-user-import-config-div" uib-dropdown is-open="open">
              <button type="button" class="btn btn-default form-control cc-ps-button-common" uib-dropdown-toggle>
                <span class="cc-ps-dropdown-btn-label">
                  <span class="cc-ps-dropdown-btn-title">{{::"delegation.createuser.label.category" | translate}}:</span>
                <span class="cc-ps-dropdown-btn-label-content">&nbsp;{{selectedUserCategory.name}}</span> 
                </span>
                <span class="cc-ps-dropdown-btn-expand-icon"></span>
              </button>
              <ul class="dropdown-menu cc-dlg-user-import-config-list" uib-dropdown-menu role="menu" aria-labelledby="single-button">
                <li role="menuitem" class="cc-dlg-user-import-config" ng-repeat="category in userCategories"><a href="javascript:void(0)" data-ng-click="setUserCategory(category);setDirty()">{{category.name}}</a></li>
              </ul>
            </div>
            <div class="cc-create-page-editor-data cc-user-manual-anchor" ng-class="{ 'has-error': userForm.val.firstName.$touched && userForm.val.firstName.$invalid }">
              <label for="firstName"> {{::"delegation.createuser.label.firstname" | translate}} 
                <i id="icon-user-first-name-manual" class="fa cc-about-individual-question fa-question-circle" data-ng-click="showUserManual['First Name']=true" data-ng-if="pageOptionList['First Name']"> </i>
              </label>
              <input id="firstName" class="cc-dlg-create-page-editor-input-placeholder cc-create-page-editor-data-right cc-create-page-common-input" placeholder="{{'delegation.createuser.placeholder.firstname' | translate}}" data-ng-model="User.firstName" name="firstName" required ng-maxlength="255" maxlength="255" data-ng-disabled="!userEditable"/>
              <div class="cc-validation-block" ng-messages="userForm.val.firstName.$error" ng-if="userForm.val.firstName.$touched">
                <p ng-message="required"> {{::"delegation.create.validation.firstname.required" | translate}} </p>
              </div>
              <user-manual class="cc-user-manual-input cc-user-manual-position-right" data-app="{{userManualOption.app}}" data-section="{{userManualOption.section}}" data-page="{{userManualOption.page}}" key="First Name" data-ng-model="showUserManual['First Name']"></user-manual>
            </div>
            <div class="cc-create-page-editor-data cc-user-manual-anchor" ng-class="{ 'has-error': userForm.val.lastName.$touched && userForm.val.lastName.$invalid }">
              <label for="lastName"> {{::"delegation.createuser.label.lastname" | translate}} 
                <i id="icon-user-last-name-manual" class="fa cc-about-individual-question fa-question-circle" data-ng-click="showUserManual['Last Name']=true" data-ng-if="pageOptionList['Last Name']"> </i>
              </label>
              <input id="lastName" class="cc-dlg-create-page-editor-input-placeholder cc-create-page-editor-data-right cc-create-page-common-input" placeholder="{{'delegation.createuser.placeholder.lastname' | translate}}" data-ng-model="User.lastName" name="lastName" ng-maxlength="255" maxlength="255" data-ng-disabled="!userEditable"/>
              <user-manual class="cc-user-manual-input cc-user-manual-position-right" data-app="{{userManualOption.app}}" data-section="{{userManualOption.section}}" data-page="{{userManualOption.page}}" key="Last Name" data-ng-model="showUserManual['Last Name']"></user-manual>
            </div>
            <div class="cc-create-page-editor-data cc-user-manual-anchor" ng-class="{ 'has-error': userForm.val.username.$touched && userForm.val.username.$invalid }">
              <label for="name"> {{::"delegation.createuser.label.username" | translate}} 
                <i id="icon-user-username-manual" class="fa cc-about-individual-question fa-question-circle" data-ng-click="showUserManual['Username']=true" data-ng-if="pageOptionList['Username']"> </i>
              </label>
              <input id="name" class="cc-dlg-create-page-editor-input-placeholder cc-create-page-editor-data-right cc-create-page-common-input" placeholder="{{'delegation.createuser.placeholder.username' | translate}}" data-ng-model="User.username" name="username" required ng-maxlength="255" maxlength="255" data-ng-disabled="isEditMode" ng-pattern="'^[a-zA-Z][a-zA-Z0-9_.]+$'" autocomplete="off">
              <div class="cc-validation-block" ng-messages="userForm.val.username.$error" ng-if="userForm.val.username.$touched">
                <p ng-message="required"> {{::"delegation.create.validation.name.required" | translate}} </p>
                <p ng-message="pattern"> {{"userprofile.validation.alphanumeric.pattern" | translate}} </p>
              </div>
              <user-manual class="cc-user-manual-input cc-user-manual-position-right" data-app="{{userManualOption.app}}" data-section="{{userManualOption.section}}" data-page="{{userManualOption.page}}" key="Username" data-ng-model="showUserManual['Username']"></user-manual>
            </div>
            <div class="cc-create-page-editor-data cc-user-manual-anchor" ng-class="{ 'has-error': userForm.val.username.$touched && userForm.val.username.$invalid }">
              <label for="email"> {{::"delegation.createuser.label.email" | translate}} 
                <i id="icon-user-email-manual" class="fa cc-about-individual-question fa-question-circle" data-ng-click="showUserManual['Email']=true" data-ng-if="pageOptionList['Email']"> </i>
              </label>
              <input id="email" type="email" class="cc-dlg-create-page-editor-input-placeholder cc-create-page-editor-data-right cc-create-page-common-input" placeholder="{{'delegation.createuser.placeholder.email' | translate}}" data-ng-model="User.email" name="email" ng-required="installMode=='SAAS'" data-ng-disabled="!userEditable" ng-maxlength="255" maxlength="255" autocomplete="off">
              <div class="cc-validation-block" ng-messages="userForm.val.email.$error" ng-if="userForm.val.email.$touched">
                <p ng-message="required"> {{::"delegation.create.validation.email.required" | translate}} </p>
                <p ng-show="userForm.val.email.$error.email"> {{::"delegation.create.validation.email.pattern" | translate}} </p>
              </div>
              <user-manual class="cc-user-manual-input cc-user-manual-position-right" data-app="{{userManualOption.app}}" data-section="{{userManualOption.section}}" data-page="{{userManualOption.page}}" key="Email" data-ng-model="showUserManual['Email']"></user-manual>
            </div>
            <div  class="cc-create-page-editor-data cc-user-manual-anchor" ng-class="{ 'has-error': userForm.val.password.$touched && userForm.val.password.$invalid }">
              <label for="password"> {{::"delegation.createuser.label.password" | translate}} 
                <i id="icon-user-password-manual" class="fa cc-about-individual-question fa-question-circle" data-ng-click="showUserManual['Password']=true" data-ng-if="pageOptionList['Password']"> </i>
              </label>
              <input type="password" id="password" class="cc-dlg-create-page-editor-input-placeholder cc-create-page-editor-data-right cc-create-page-common-input" placeholder="{{'delegation.createuser.placeholder.password' | translate}}" data-ng-model="User.password" name="password" ng-required="!isEditMode" data-ng-disabled="!userEditable" data-ng-pattern="/^(?:(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[^A-Za-z0-9]))(?!.*(.)\1{2,})[A-Za-z0-9!~`<>,;:_=?*+#.\\'\x22&%()\|\[\]\{\}\-\$\^\@\/]{10,128}$/" autocomplete="off"/>
              <div class="cc-validation-block" ng-messages="userForm.val.password.$error" ng-if="userForm.val.password.$touched">
                 <p ng-message="maxlength"> {{"userprofile.validation.password.maxLength" | translate}} </p>
                 <p ng-message="minlength"> {{"userprofile.validation.password.minLength" | translate}} </p>
                 <p ng-message="required"> {{"userprofile.validation.password.required" | translate}} </p>
                 <p ng-message="pattern"> {{"userprofile.validation.password.pattern" | translate}} </p>
              </div>
              <user-manual class="cc-user-manual-input cc-user-manual-position-right" data-app="{{userManualOption.app}}" data-section="{{userManualOption.section}}" data-page="{{userManualOption.page}}" key="Password" data-ng-model="showUserManual['Password']"></user-manual>
            </div>
            <div class="cc-create-page-editor-data cc-user-manual-anchor" ng-class="{ 'has-error': userForm.val.conFirmpassword.$touched && userForm.val.conFirmpassword.$invalid }">
              <label for="conFirmpassword"> {{::"delegation.createuser.label.confirmpassword" | translate}} 
                <i id="icon-user-confirm-password-manual" class="fa cc-about-individual-question fa-question-circle" data-ng-click="showUserManual['Confirm Password']=true" data-ng-if="pageOptionList['Confirm Password']"> </i>
              </label>
              <input type="password" id="conFirmpassword" class="cc-dlg-create-page-editor-input-placeholder cc-create-page-editor-data-right cc-create-page-common-input" placeholder="{{'delegation.createuser.placeholder.confirmpassword' | translate}}" data-ng-model="User.confirmPassword" ng-required="!isEditMode" data-ng-disabled="!userEditable" name="conFirmpassword" autocomplete="off"/>
              <div class="cc-validation-block" ng-messages="userForm.val.conFirmpassword.$error" ng-if="userForm.val.conFirmpassword.$touched">
                 <p ng-message="maxlength"> {{"userprofile.validation.confirmPassword.maxLength" | translate}} </p>
                 <p ng-message="minlength"> {{"userprofile.validation.confirmPassword.minLength" | translate}} </p>
                 <p ng-message="required"> {{"userprofile.validation.confirmPassword.required" | translate}} </p>
                 <p ng-if="User.confirmPassword != User.password"> {{"userprofile.validation.confirmPassword.notMatch" | translate}} </p>
              </div>
              <user-manual class="cc-user-manual-input cc-user-manual-position-right" data-app="{{userManualOption.app}}" data-section="{{userManualOption.section}}" data-page="{{userManualOption.page}}" key="Confirm Password" data-ng-model="showUserManual['Confirm Password']"></user-manual>
            </div>
            <p class="pwd-req"> (Note: {{'cc.password.requirement' | translate}})</p>
          </div>
          <div id="userAttrs" class="cc-dlg-create-page-editor-title">
            <span class="cc-dlg-create-page-title-underline"> {{::"USER ATTRIBUTES" | translate}} </span>
            <i id="icon-user-attributes-manual" class="fa cc-about-individual-question fa-question-circle" data-ng-click="showUserManual['User Attributes']=true" data-ng-if="pageOptionList['User Attributes']"></i>
          </div>
          <div class="cc-dlg-create-page-editor-info admin-bottom-input-container">
          <div class=" cc-user-manual-anchor">
              <user-manual class="cc-user-manual-input cc-user-manual-position-right" data-app="{{userManualOption.app}}" data-section="{{userManualOption.section}}" data-page="{{userManualOption.page}}" key="User Attributes" data-ng-model="showUserManual['User Attributes']"></user-manual>
              <div class="cc-ps-search-text-container cc-create-page-editor-data-right">
              <p class="table-message" data-ng-class="{'success':attributeTable.success,'error':attributeTable.error}" data-ng-show="attributeTable.notify">{{attributeTable.message}}</p>
                <div class="cc-ps-create-page-editor-resource-attribute-div cc-flex-container cc-flex-space-between">
                    <div class="table-header">
                      <p class="heading">Characteristics of a user that may be referenced in delegation policy creation</p>
                      <p class="count" data-ng-if="User.attributes.length">{{User.attributes.length}} {{(User.attributes.length > 1) ? 'Conditions': 'Condition'}}</p>
                    </div>
                      <input class="btn btn-default cc-create-page-add-condition-btn" type="button" value="ADD NEW ATTRIBUTE" data-ng-click="addAttribute(User.attributes.length+1);attributeTable.dirty = true;" data-ng-disabled="editItem.$$hashKey" data-ng-show="userEditable"/> 
                  </div>
                                
                <table class="table cc-ps-create-page-common-table cc-ps-create-page-editable-table" ng-class="{'custom-validation-error':model_error}">
                <thead>
                  <tr>
                    <th style="width:50%">{{"Name" | translate}}</th>
                    <th style="width:40%">{{"Value" | translate}}</th>
                    <th style="width:10%" ng-show="userEditable"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="" ng-repeat="attr in User.attributes track by $index" data-ng-include="editItem.$$hashKey == attr.$$hashKey ? 'ui/app/Delegation/Users/template/user-attribute-edit.html' : 'ui/app/Delegation/Users/template/user-attribute-view.html'"></tr>
                  <tr class="last-row" data-ng-show="!editItem.$$hashKey && userEditable">
                    <td colspan="5"> 
                      <a href="javascript:void(0)" data-ng-click="addAttribute(User.attributes.length+1);attributeTable.dirty = true;" >+ {{'Add New Attribute' | translate}}</a>
                    </td>
                  </tr>
                </tbody>
                </table>
              </div>
            </div>
          </div>
        </form>
      </div>
     <div class="clear"></div>
    </div>
  </div>
</div>
